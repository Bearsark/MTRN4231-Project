-------------------------------------------------------------------------------------------
COMPUTER VISION SUBSYSTEM INSTRUCTIONS
-------------------------------------------------------------------------------------------

When installing this project on a fresh computer, you might have to delete the build, install and log folders before running "colcon build" again. Errors may appear if you don't. Don't forget to source.

Camera setup height: 62 cm
Length from robot base to camera stand: 139 cm
Y-axis offset of robot base from camera stand: 10 cm
Camera angle from horizontal: -50 degrees

Setup Instructions:
Each of the following should be run in seperate terminals. Do NOT include the quotation marks (") when running commands.

1) To run the camera node:
   IF USING THE STANDARD MICROSOFT CAMERA:
	"ros2 run v4l2_camera v4l2_camera_node"
   If an error appears, try restarting the computer. If that doesn't work, run the following
   before trying again:
	"qv4l2 -R -d /dev/video0"

   IF USING THE ASTRA DEPTH CAMERA:
	"ros2 launch astra_camera astra_pro.launch.py"
   Make the sure astra camera files are installed, and that the workspace name does NOT have spaces! E.g. "Bottle_Flip_Project". If using the other astra camera, replace astra_pro with astra_mini.

   IF USING THE INTEL REALSENSE CAMERA:
	"ros2 launch realsense2_camera rs_launch.py depth_module.profile:=1280x720x30 pointcloud.enable:=true"
   If this doesn't work, make sure the compute has installed the files properly. Look at the ed forum for the install code.

2) To get Yolo trained with bottle images:
	"yolo task=detect mode=train model=yolov8n.pt imgsz=640 data=my_dataset.yaml epochs=10 batch=1 name=bottle_detection"
   Make sure you are in the directory of my_dataset.yaml when you run this. If it still doesn't work, try run:
	"rm /home/mtrn/.config/Ultralytics/settings.yaml"

3) To run the Yolov8 node:
   IF USING THE STANDARD MICROSOFT CAMERA:
	"ros2 launch yolov8_bringup yolov8.launch.py input_image_topic:='/image_raw' device:='cpu'"

   IF USING THE ASTRA DEPTH CAMERA:
	"ros2 launch yolov8_bringup yolov8_3d.launch.py input_image_topic:='/camera/color/image_raw' device:='cpu' target_frame:='camera_link' model:='yolov8n.pt'"
   If the above has problems, the astra camera setup files may not be installed properly. Yolo needs to be configured to use it.

   IF USING THE INTEL REALSENSE CAMERA:
	"ros2 launch yolov8_bringup yolov8_3d.launch.py input_image_topic:='/camera/color/image_raw' input_depth_topic:='/camera/depth/image_rect_raw' device:='cpu' target_frame:='camera_link' model:='yolov8n.pt'"

4) To run Rviz with Yolo:
	"ros2 run rviz2 rviz2"
   Subscribe to the topic:
	- /yolo/dbg_image (for yolo overlay on image)

   IF USING DEPTH CAMERA:
   Also subscribe to the topics:
	- /camera/depth/points under "By display type > PointCloud2" (to show point cloud on Rviz)
	- /yolo/dgb_bb_markers (to show bounding boxes on Rviz)

5) To run the computer vision post processing node, use the command:
	"ros2 run cv_post_process post_process"
   cv_post_process is the package name, post_process is the executable name.

